import{_ as ae}from"./index-393f84c9.js";import{Y as N,d as se,r as p,C as re,B as R,x as de,o as g,c as ie,e as l,f as o,a as d,k as a,t as v,I,J as h,b as L,E as P,h as s,q as Y}from"./index-4223df14.js";import{_ as me}from"./index.vue_vue_type_script_setup_true_lang-36c6870c.js";const q={quertMenu:m=>N.get("menu/query",{params:m}),visibleMenu:m=>N.post("menu/visible",m),setMenu:m=>N.post("menu/setMenu",m),delMenu:m=>N.post("menu/delete",m),updateIcon:m=>N.post("menu/updateIcon",m)},pe={class:"flex justify-between"},fe=d("b",null,"客户端动态菜单设置",-1),ce={class:"flex items-center"},_e={class:"flex items-center"},ve={class:"dialog-footer"},ye={style:{display:"flex","align-items":"center"}},ge=d("span",{style:{width:"130px"}},"修改ICON编码:",-1),be={style:{display:"flex","align-items":"center","margin-top":"12px"}},we=d("span",{style:{width:"130px"}},"修改菜单名称:",-1),Ve={style:{display:"flex","align-items":"center","margin-top":"12px"}},Ie=d("span",{style:{width:"130px"}},"修改菜单排序:",-1),he={class:"dialog-footer"},Te=se({__name:"menu",setup(m){const T=p(1),x=p(),b=p(!1),c=p(0),C=p(""),k=p(""),U=p(0),S=p(!1),n=p({menuTipText:"",menuIframeUrl:"",isJump:!1,isShow:!0,menuIcon:"",menuPath:"",order:1e3,isNeedAuth:!1,isSystem:!0}),G={menuTipText:[{required:!0,trigger:"blur",message:"请填写菜单名称"}],menuIframeUrl:[{required:!0,trigger:"blur",message:"请填写三方网页地址"}],isJump:[{required:!0,trigger:"blur",message:"请确认是否跳转"}],isShow:[{required:!0,trigger:"blur",message:"请确认是否打开菜单"}],menuIcon:[{required:!0,trigger:"blur",message:"请填写ICON图标"}],order:[{required:!0,trigger:"blur",message:"请填写排序ID"}],menuPath:[{required:!0,trigger:"blur",message:"请填写菜单路径"}],isSystem:[{required:!0,trigger:"blur",message:"请确认是否是系统内地址"}],isNeedAuth:[{required:!0,trigger:"blur",message:"请确认是否需要权限"}]};re(T,u=>{w()});const H=R(()=>c.value>0?"编辑菜单":"添加菜单"),K=R(()=>c.value>0?"确认修改":"确认添加"),D=p([]);async function w(){const u=await q.quertMenu({menuPlatform:T.value});D.value=u.data}function F(u){u==null||u.resetFields(),c.value=0}async function Q(u){const{id:t}=u;await q.visibleMenu({id:t}),P.success("操作成功！"),w()}async function W(u){await q.delMenu({id:u.id}),P.success("操作成功！"),w()}async function X(){var u;(u=x.value)==null||u.resetFields(),c.value=0,b.value=!0}async function Z(u){u==null||u.validate(async t=>{if(!t)return;const y=Object.assign(n.value,{id:c},{menuPlatform:T.value});await q.setMenu(y),P.success("操作成功！"),u.resetFields(),b.value=!1,w()})}function E(u){const{id:t,menuTipText:y,menuIframeUrl:M,isJump:V,isShow:z,menuIcon:O,menuPath:A,order:i,isNeedAuth:r}=u;c.value=t,n.value={menuTipText:y,menuIframeUrl:M,isJump:V,isShow:z,menuIcon:O,menuPath:A,order:i,isNeedAuth:r,isSystem:!A},b.value=!0}async function ee(u){console.log("row: ",u);const{id:t,menuIcon:y,menuTipText:M,order:V}=u;C.value=y,k.value=M,U.value=V,c.value=t,S.value=!0}async function le(){if(!C.value||!k.value||!U.value)return P.error("请填写ICON编码");const u={id:c.value,menuIcon:C.value,menuTipText:k.value,order:U.value};await q.updateIcon(u),P.success("操作成功！"),w(),S.value=!1}return de(()=>{w()}),(u,t)=>{const y=s("el-alert"),M=ae,V=s("el-radio-button"),z=s("el-radio-group"),O=s("Plus"),A=s("el-icon"),i=s("el-button"),r=s("el-table-column"),J=s("el-tag"),te=s("el-popconfirm"),oe=s("el-table"),ue=s("el-card"),$=s("el-switch"),f=s("el-form-item"),_=s("el-input"),ne=s("el-form"),j=s("el-dialog");return g(),ie("div",null,[l(M,null,{default:o(()=>[l(y,{closable:!1,"show-icon":"",title:"动态菜单配置说明",description:"请至少配置一个、如果不配置默认设置对话页面、排序ID越小越靠前、PC和移动端是两套独立的设置、图标选择请在此处： https://icon-sets.iconify.design/ 找到或搜索到喜欢的图标之后可以复制下方的图标编号 例如material-symbols:chat-outline、更加详细文档参考官方演示站公告文档地址！",type:"success"})]),_:1}),l(ue,{style:{margin:"20px"}},{header:o(()=>[d("div",pe,[fe,d("div",ce,[l(z,{modelValue:T.value,"onUpdate:modelValue":t[0]||(t[0]=e=>T.value=e),size:"large"},{default:o(()=>[l(V,{label:1},{default:o(()=>[a("PC端")]),_:1}),l(V,{label:0},{default:o(()=>[a("移动端")]),_:1})]),_:1},8,["modelValue"]),l(i,{size:"large",class:"ml-5",onClick:X},{default:o(()=>[a(" 添加菜单 "),l(A,{class:"ml-3"},{default:o(()=>[l(O)]),_:1})]),_:1})])])]),default:o(()=>[l(oe,{data:D.value,style:{width:"100%"}},{default:o(()=>[l(r,{prop:"menuTipText",label:"菜单文本"}),l(r,{prop:"menuType",label:"菜单类型"},{default:o(e=>[l(J,{type:e.row.menuType?"success":"danger"},{default:o(()=>[a(v(e.row.menuType===0?"系统预设":"自定义菜单"),1)]),_:2},1032,["type"])]),_:1}),l(r,{prop:"isJump",label:"是否打开新窗口"},{default:o(e=>[l(J,{type:e.row.isJump?"success":"danger"},{default:o(()=>[a(v(e.row.isJump?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(r,{prop:"isShow",label:"是否显示菜单"},{default:o(e=>[l(J,{type:e.row.isShow?"success":"danger"},{default:o(()=>[a(v(e.row.isShow?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(r,{prop:"isNeedAuth",label:"是否需要登录访问"},{default:o(e=>[l(J,{type:e.row.isNeedAuth?"success":"danger"},{default:o(()=>[a(v(e.row.isNeedAuth?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(r,{prop:"menuIcon",label:"菜单图标"},{default:o(e=>[l(me,{style:{"font-size":"24px"},icon:e.row.menuIcon},null,8,["icon"])]),_:1}),l(r,{prop:"order",label:"排序"}),l(r,{prop:"menuPath",label:"菜单路径"},{default:o(e=>[a(v(e.row.menuPath||"---"),1)]),_:1}),l(r,{prop:"menuIframeUrl",label:"三方网页链接"},{default:o(e=>[a(v(e.row.menuIframeUrl||"---"),1)]),_:1}),l(r,{label:"操作"},{default:o(e=>[d("div",_e,[e.row.menuType?(g(),I(i,{key:0,onClick:B=>E(e.row),size:"small"},{default:o(()=>[a("编辑菜单")]),_:2},1032,["onClick"])):h("",!0),e.row.menuType?h("",!0):(g(),I(i,{key:1,onClick:B=>ee(e.row),size:"small"},{default:o(()=>[a("修改默认")]),_:2},1032,["onClick"])),e.row.menuType?h("",!0):(g(),I(i,{key:2,onClick:B=>Q(e.row),type:e.row.isShow?"danger":"success",size:"small"},{default:o(()=>[a(v(e.row.isShow?"隐藏菜单":"打开菜单"),1)]),_:2},1032,["onClick","type"])),e.row.menuType?(g(),I(te,{key:3,title:"是否删除当前菜单？",onConfirm:B=>W(e.row)},{reference:o(()=>[l(i,{type:"danger",size:"small"},{default:o(()=>[a("删除菜单")]),_:1})]),_:2},1032,["onConfirm"])):h("",!0)])]),_:1})]),_:1},8,["data"])]),_:1}),l(j,{modelValue:b.value,"onUpdate:modelValue":t[12]||(t[12]=e=>b.value=e),"close-on-click-modal":!1,title:L(H),width:"570",onClose:t[13]||(t[13]=e=>F(x.value))},{footer:o(()=>[d("span",ve,[l(i,{onClick:t[10]||(t[10]=e=>b.value=!1)},{default:o(()=>[a("我再想想")]),_:1}),l(i,{type:"primary",onClick:t[11]||(t[11]=e=>Z(x.value))},{default:o(()=>[a(v(L(K)),1)]),_:1})])]),default:o(()=>[l(ne,{ref_key:"formRef",ref:x,"label-width":"140",rules:G,model:n.value},{default:o(()=>[l(f,{label:"是否打开菜单",prop:"isShow"},{default:o(()=>[l($,{modelValue:n.value.isShow,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value.isShow=e)},null,8,["modelValue"])]),_:1}),l(f,{label:"是否属于三方网页",prop:"isSystem"},{default:o(()=>[l($,{modelValue:n.value.isSystem,"onUpdate:modelValue":t[2]||(t[2]=e=>n.value.isSystem=e)},null,8,["modelValue"])]),_:1}),l(f,{label:"菜单文本提示信息",prop:"menuTipText"},{default:o(()=>[l(_,{modelValue:n.value.menuTipText,"onUpdate:modelValue":t[3]||(t[3]=e=>n.value.menuTipText=e),placeholder:"请填写菜单提示文字"},null,8,["modelValue"])]),_:1}),l(f,{label:"菜单图标编号",prop:"menuIcon"},{default:o(()=>[l(_,{modelValue:n.value.menuIcon,"onUpdate:modelValue":t[4]||(t[4]=e=>n.value.menuIcon=e),placeholder:"请填写菜单ICON图标"},null,8,["modelValue"])]),_:1}),n.value.isSystem?(g(),I(f,{key:0,label:"加载三方网页地址",prop:"menuIframeUrl"},{default:o(()=>[l(_,{modelValue:n.value.menuIframeUrl,"onUpdate:modelValue":t[5]||(t[5]=e=>n.value.menuIframeUrl=e),placeholder:"请填写加载的三方网页地址"},null,8,["modelValue"])]),_:1})):h("",!0),l(f,{label:"数字编号排序",prop:"order"},{default:o(()=>[l(_,{modelValue:n.value.order,"onUpdate:modelValue":t[6]||(t[6]=e=>n.value.order=e),type:"number",placeholder:"请填写排序Id、越小越靠前"},null,8,["modelValue"])]),_:1}),n.value.isSystem?h("",!0):(g(),I(f,{key:1,label:"系统内菜单路径",prop:"menuPath"},{default:o(()=>[l(_,{modelValue:n.value.menuPath,"onUpdate:modelValue":t[7]||(t[7]=e=>n.value.menuPath=e),placeholder:"请填写系统内置菜单地址"},null,8,["modelValue"])]),_:1})),l(f,{label:"是否打开新窗口",prop:"isJump"},{default:o(()=>[l($,{modelValue:n.value.isJump,"onUpdate:modelValue":t[8]||(t[8]=e=>n.value.isJump=e)},null,8,["modelValue"])]),_:1}),l(f,{label:"是否需要登录访问",prop:"isNeedAuth"},{default:o(()=>[l($,{modelValue:n.value.isNeedAuth,"onUpdate:modelValue":t[9]||(t[9]=e=>n.value.isNeedAuth=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(j,{modelValue:S.value,"onUpdate:modelValue":t[18]||(t[18]=e=>S.value=e),title:"修改默认信息",width:"570",onClose:t[19]||(t[19]=e=>F(x.value))},{footer:o(()=>[d("span",he,[l(i,{onClick:t[17]||(t[17]=e=>S.value=!1)},{default:o(()=>[a("我再想想")]),_:1}),l(i,{type:"primary",onClick:le},{default:o(()=>[a(" 确认修改 ")]),_:1})])]),default:o(()=>[d("div",ye,[ge,l(_,{modelValue:C.value,"onUpdate:modelValue":t[14]||(t[14]=e=>C.value=e),placeholder:"请填写要修改的ICON编码"},null,8,["modelValue"])]),d("div",be,[we,l(_,{modelValue:k.value,"onUpdate:modelValue":t[15]||(t[15]=e=>k.value=e),placeholder:"请填写要修改的菜单名称"},null,8,["modelValue"])]),d("div",Ve,[Ie,l(_,{modelValue:U.value,"onUpdate:modelValue":t[16]||(t[16]=e=>U.value=e),placeholder:"请修改菜单排序 越大越靠前"},null,8,["modelValue"])])]),_:1},8,["modelValue"])])}}});typeof Y=="function"&&Y(Te);export{Te as default};
