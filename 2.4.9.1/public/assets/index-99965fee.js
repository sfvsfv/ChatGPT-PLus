import{d as ze,m as Re,k as Ue,b as I,Q as De,n as qe,r as m,o as c,c as d,a as e,f as s,w as n,A as b,t as A,u as t,R as lt,C as xe,z as g,_ as x,S as p,v,U as ne,V as ot,L as Be,W as Ge,X as it,I as rt,Y as ct,l as dt,p as ut,Z as ft,e as bt,F as ee,s as te,M as me,q as W,j as vt,$ as mt,a0 as ke,a1 as gt,a2 as Ce,K as xt,i as Oe,a3 as ht,a4 as pt}from"./index-af57f048.js";import{f as F,a as _e}from"./mjDraw-085a1588.js";import{N as se}from"./InputNumber-5f66d80b.js";import{N as wt}from"./Switch-43ab97c5.js";import{N as ge}from"./Select-291c33fc.js";const yt="/assets/niji-55cc65e6.png",It="/assets/mj-8c02cbcc.png",At="/assets/market-f1234219.png",kt="/assets/fail-7089de31.png",je="/assets/draw-bccd19c4.svg",Pe="/assets/zoom-426d4db7.svg",Ct={class:"relative overflow-hidden rounded-md border p-4 transition-all hover:shadow dark:border-neutral-700"},Ot={class:"flex items-center justify-between"},_t={style:{width:"240px"}},jt={class:"my-4 h-[280px]"},Pt={key:0,class:"flex h-full w-full items-center justify-center overflow-hidden rounded-md"},zt={key:1,class:"flex flex-col h-full w-full items-center justify-center overflow-hidden rounded-md"},Rt=["src"],Ut=e("span",{class:"mt-3 text-base"},"绘制失败",-1),Dt=e("span",{class:"mt-1"},"已退还余额至您的账户！",-1),qt={key:2,class:"my-4 h-[280px] relative"},Bt={class:"-mx-4 -mb-4 bg-[#fafafc] px-4 py-2 dark:bg-[#262629]"},Gt={key:0,class:"w-full"},St={class:"mb-2 flex items-center justify-between"},Kt=e("span",null,"放大：",-1),Ht={class:"text-base text-neutral-400"},Mt=e("div",{style:{width:"240px"}},[e("p",null,"参数释义：放大某张图片如 U1 放大第一张图片，以此类推")],-1),Nt={class:"flex-1"},Qt={class:"flex items-center justify-around"},Ft=e("p",null,"重新生成一次",-1),Tt={key:1,class:"w-full"},Lt={class:"mb-2 flex items-center justify-between"},Et=e("span",null,"变换：",-1),Vt={class:"text-base text-neutral-400"},Jt=e("div",{style:{width:"240px"}},[e("p",null,"参数释义：以某张图片为基准重新生成 如 V1 则变换第一张图片，以此类推")],-1),Zt={class:"flex-1"},Yt={class:"flex items-center justify-around"},Xt={key:2,class:"w-full mb-2 flex items-center justify-between"},Wt={key:0},$t={key:0},es={key:1},ts={key:1,class:"flex w-full"},ss={class:"mb-2 flex flex-1 items-center justify-between"},ns=e("span",null,"调整：",-1),as={class:"text-base text-neutral-400"},ls=e("div",{style:{width:"275px"}},[e("p",null,"参数释义：Vary 以当前图片为基础调整图片")],-1),os={class:"flex-1"},is={class:"flex items-center pl-2"},rs=["src"],cs=e("p",null,"以当前图片为基础细微调整",-1),ds=["src"],us=e("p",null,"以当前图片为基础大幅增强",-1),fs={key:2},bs={key:3,class:"w-full mb-2 flex items-center justify-between"},vs={key:4,class:"w-full mb-2 flex items-center justify-between"},ms={key:5,class:"w-full mb-2 flex items-center justify-between"},gs={key:6},xs={class:"mb-2 flex flex-1 items-center justify-between"},hs=e("span",null,"缩放：",-1),ps={class:"text-base text-neutral-400"},ws=e("div",{style:{width:"270px"}},[e("p",null,"参数释义：Zoom 对当前图片进行无限缩放")],-1),ys={class:"flex-1"},Is={class:"flex items-center pl-2"},As=["src"],ks=e("p",null,"缩放2倍",-1),Cs=["src"],Os=e("p",null,"缩放1.5倍",-1),_s={class:"w-full flex"},js={class:"text-[#64748b]"},Ps=ze({__name:"cardItem",props:{drawItemInfo:null},emits:["usePrompt","queryData"],setup(r,{emit:P}){const T=r,ae=Re(),y=Ue(),le=I(()=>ae.theme),oe=I(()=>le.value==="dark"?"#fff":"#000"),$=De(),z=qe(),ie="/api/midjourney/download",L=m(!1),R=I(()=>{const{status:u}=T.drawItemInfo;if(u===1)return"";if(u===2)return"info";if(u===3)return"primary";if(u===4||u===5)return"error"}),re=I(()=>{const{status:u}=T.drawItemInfo;if(u===1)return"等待中";if(u===2)return"绘制中";if(u===3)return"成功";if(u===4)return"失败";if(u===5)return"超时"});function E(){P("usePrompt")}async function ce(u){const i=$.info({title:"下载图片",content:"是否确认下载当前图片",positiveText:"下载",negativeText:"取消",onPositiveClick:async()=>(i.loading=!0,new Promise(async f=>{const{fileInfo:w}=u,{filename:_,cosUrl:O}=w,B=await Ge.post(ie,{url:O},{responseType:"blob"}),N=new Blob([B.data],{type:B.headers["content-type"]}),D=window.URL.createObjectURL(N),j=document.createElement("a");j.href=D,j.download=_,j.click(),f(!0)}))})}async function V(u){$.warning({title:"删除记录",content:"是否确认删除当前绘制记录？",positiveText:"删除",negativeText:"取消",onPositiveClick:async()=>{const{id:i}=u,f=await it({id:i});if(!f.success)return z.error(f.message);z.success("删除绘制记录成功！"),P("queryData")}})}async function q(u,i){const{id:f}=u;await F({drawId:f,action:2,orderId:i}),z.success("提交放大绘制任务成功、请等待绘制结束！"),y.token&&await k(),P("queryData")}async function S(u,i){const{id:f}=u;await F({drawId:f,action:5,orderId:i}),z.success("提交重新生成绘制任务成功、请等待绘制结束！"),y.token&&await k(),P("queryData")}async function C(u,i){const{id:f}=u;await F({drawId:f,action:3,orderId:i}),z.success("提交图片变换绘制任务成功、请等待绘制结束！"),y.token&&await k(),P("queryData")}async function k(){L.value=!0;try{await y.getUserInfo(),L.value=!1}catch{L.value=!1}}const K=I(()=>{const{progress:u,status:i}=T.drawItemInfo;if(i===1)return"正在排队中...";if(i===2&&!u)return"正在绘制中...";if(i===2&&u===100)return"正在存储图片中..."});async function H(u,i){const{id:f}=u;await F({drawId:f,action:7,orderId:i}),z.success("提交图片调整绘制任务成功、请等待绘制结束！"),y.token&&await k(),P("queryData")}async function M(u,i){const{id:f}=u;await F({drawId:f,action:6,orderId:i}),z.success("提交图片调整绘制任务成功、请等待绘制结束！"),y.token&&await k(),P("queryData")}return(u,i)=>(c(),d("div",Ct,[e("div",Ot,[e("span",null,[s(t(lt),{size:"small",type:t(R)},{default:n(()=>[b(A(t(re)),1)]),_:1},8,["type"])]),s(t(ne),null,{default:n(()=>[r.drawItemInfo.isGroup?(c(),xe(t(p),{key:0,placement:"top",trigger:"hover"},{trigger:n(()=>[s(t(g),{size:"tiny",ghost:"",onClick:E},{icon:n(()=>[s(t(x),{icon:"ri:brush-line",class:"text-base"})]),default:n(()=>[b(" 使用 ")]),_:1})]),default:n(()=>[e("div",_t,[e("p",null,A(r.drawItemInfo.fullPrompt),1)])]),_:1})):v("",!0),s(t(g),{size:"tiny",ghost:"",onClick:i[0]||(i[0]=f=>ce(r.drawItemInfo))},{icon:n(()=>[s(t(x),{icon:"mingcute:file-download-line",class:"text-base"})]),default:n(()=>[b(" 下载 ")]),_:1}),s(t(g),{size:"tiny",ghost:"",onClick:i[1]||(i[1]=f=>V(r.drawItemInfo))},{icon:n(()=>[s(t(x),{icon:"ri:delete-bin-line",class:"text-base"})]),default:n(()=>[b(" 删除 ")]),_:1})]),_:1})]),e("div",jt,[r.drawItemInfo.status===3?(c(),d("div",Pt,[s(t(ot),{style:{"object-fit":"contain"},src:r.drawItemInfo.fileInfo.thumbImg,"preview-src":r.drawItemInfo.fileInfo.cosUrl,"object-fit":"contain"},null,8,["src","preview-src"])])):v("",!0),[4,5,6].includes(r.drawItemInfo.status)?(c(),d("div",zt,[e("img",{class:"w-[75px]",src:t(kt)},null,8,Rt),Ut,Dt])):v("",!0),[1,2].includes(r.drawItemInfo.status)?(c(),d("div",qt,[s(Be,{"text-color":t(oe),progress:r.drawItemInfo.progress,tips:t(K)},null,8,["text-color","progress","tips"])])):v("",!0)]),e("div",Bt,[r.drawItemInfo.isGroup?(c(),d("div",Gt,[e("div",St,[Kt,e("span",Ht,[s(t(p),{placement:"top",trigger:"hover"},{trigger:n(()=>[s(t(x),{icon:"ri:error-warning-line",class:"text-base"})]),default:n(()=>[Mt]),_:1})]),e("div",Nt,[e("div",Qt,[s(t(g),{size:"tiny",onClick:i[2]||(i[2]=f=>q(r.drawItemInfo,1))},{default:n(()=>[b(" U1 ")]),_:1}),s(t(g),{size:"tiny",onClick:i[3]||(i[3]=f=>q(r.drawItemInfo,2))},{default:n(()=>[b(" U2 ")]),_:1}),s(t(g),{size:"tiny",onClick:i[4]||(i[4]=f=>q(r.drawItemInfo,3))},{default:n(()=>[b(" U3 ")]),_:1}),s(t(g),{size:"tiny",onClick:i[5]||(i[5]=f=>q(r.drawItemInfo,4))},{default:n(()=>[b(" U4 ")]),_:1}),s(t(p),{placement:"top",trigger:"hover"},{trigger:n(()=>[s(t(g),{size:"tiny",onClick:i[6]||(i[6]=f=>S(r.drawItemInfo,5))},{default:n(()=>[s(t(x),{icon:"solar:refresh-outline",class:"text-base"})]),_:1})]),default:n(()=>[Ft]),_:1})])])])])):v("",!0),r.drawItemInfo.isGroup?(c(),d("div",Tt,[e("div",Lt,[Et,e("span",Vt,[s(t(p),{placement:"top",trigger:"hover"},{trigger:n(()=>[s(t(x),{icon:"ri:error-warning-line",class:"text-base"})]),default:n(()=>[Jt]),_:1})]),e("div",Zt,[e("div",Yt,[s(t(g),{size:"tiny",onClick:i[7]||(i[7]=f=>C(r.drawItemInfo,1))},{default:n(()=>[b(" V1 ")]),_:1}),s(t(g),{size:"tiny",onClick:i[8]||(i[8]=f=>C(r.drawItemInfo,2))},{default:n(()=>[b(" V2 ")]),_:1}),s(t(g),{size:"tiny",onClick:i[9]||(i[9]=f=>C(r.drawItemInfo,3))},{default:n(()=>[b(" V3 ")]),_:1}),s(t(g),{size:"tiny",onClick:i[10]||(i[10]=f=>C(r.drawItemInfo,4))},{default:n(()=>[b(" V4 ")]),_:1}),s(t(g),{size:"tiny",style:{opacity:"0"}},{default:n(()=>[b(" V5 ")]),_:1})])])])])):v("",!0),!r.drawItemInfo.isGroup&&r.drawItemInfo.orderId?(c(),d("div",Xt,[r.drawItemInfo.orderId!==5&&!r.drawItemInfo.extend?(c(),d("div",Wt,[r.drawItemInfo.action===2?(c(),d("span",$t," 操作："+A(`选中套图第${r.drawItemInfo.orderId||"x"}张图片进行放大`),1)):v("",!0),r.drawItemInfo.action===3?(c(),d("span",es," 操作："+A(`选中套图第${r.drawItemInfo.orderId||"x"}张图片进行变换`),1)):v("",!0)])):v("",!0),r.drawItemInfo.orderId!==5&&r.drawItemInfo.extend?(c(),d("div",ts,[e("div",ss,[ns,e("span",as,[s(t(p),{placement:"top",trigger:"hover"},{trigger:n(()=>[s(t(x),{icon:"ri:error-warning-line",class:"text-base"})]),default:n(()=>[ls]),_:1})]),e("div",os,[e("div",is,[s(t(ne),null,{default:n(()=>[s(t(p),{placement:"top",trigger:"hover"},{trigger:n(()=>[s(t(g),{size:"tiny",onClick:i[11]||(i[11]=f=>H(r.drawItemInfo,3))},{icon:n(()=>[e("img",{src:t(je),class:"w-4",alt:""},null,8,rs)]),default:n(()=>[b(" V(Subtle) ")]),_:1})]),default:n(()=>[cs]),_:1}),s(t(p),{placement:"top",trigger:"hover"},{trigger:n(()=>[s(t(g),{size:"tiny",onClick:i[12]||(i[12]=f=>H(r.drawItemInfo,4))},{icon:n(()=>[e("img",{src:t(je),class:"w-4",alt:""},null,8,ds)]),default:n(()=>[b(" V(Strong) ")]),_:1})]),default:n(()=>[us]),_:1})]),_:1})])])])])):v("",!0),r.drawItemInfo.orderId===5?(c(),d("span",fs," 操作：正在对图片重新生成一次 ")):v("",!0)])):v("",!0),!r.drawItemInfo.isGroup&&!r.drawItemInfo.orderId&&r.drawItemInfo.status===2?(c(),d("div",bs," 操作：正在火速绘制中... ")):v("",!0),!r.drawItemInfo.isGroup&&!r.drawItemInfo.orderId&&[4,5,6].includes(r.drawItemInfo.status)?(c(),d("div",vs," 执行： 换个提示词重新试试吧！ ")):v("",!0),!r.drawItemInfo.isGroup&&!r.drawItemInfo.extend?(c(),d("div",ms," 上级： "+A(r.drawItemInfo.message_id||"正在加载中..."),1)):v("",!0),!r.drawItemInfo.isGroup&&r.drawItemInfo.orderId!==5&&r.drawItemInfo.extend?(c(),d("div",gs,[e("div",xs,[hs,e("span",ps,[s(t(p),{placement:"top",trigger:"hover"},{trigger:n(()=>[s(t(x),{icon:"ri:error-warning-line",class:"text-base"})]),default:n(()=>[ws]),_:1})]),e("div",ys,[e("div",Is,[s(t(ne),null,{default:n(()=>[s(t(p),{placement:"top",trigger:"hover"},{trigger:n(()=>[s(t(g),{size:"tiny",onClick:i[13]||(i[13]=f=>M(r.drawItemInfo,1))},{icon:n(()=>[e("img",{src:t(Pe),class:"w-4",alt:""},null,8,As)]),default:n(()=>[b(" Zoom 2 ")]),_:1})]),default:n(()=>[ks]),_:1}),s(t(p),{placement:"top",trigger:"hover"},{trigger:n(()=>[s(t(g),{size:"tiny",onClick:i[14]||(i[14]=f=>M(r.drawItemInfo,2))},{icon:n(()=>[e("img",{src:t(Pe),class:"w-4",alt:""},null,8,Cs)]),default:n(()=>[b(" Zoom 1.5 ")]),_:1})]),default:n(()=>[Os]),_:1})]),_:1})])])])])):v("",!0),e("div",_s,[e("span",js,"时间："+A(r.drawItemInfo.createdAt),1)])])]))}}),zs={class:"grow flex h-screen flex-col lg:pt-0"},Rs={class:"flex grow flex-col sm:flex-row h-full"},Us={class:"p-4 sm:pt-6 bg-[#f8f8f8] p-4 dark:bg-[#18181c] overflow-y-auto w-full sm:w-[20rem] shrink-0 border-r-2 border-[#ffffff17]"},Ds={class:"mt-4 text-sm flex items-center"},qs=e("div",{class:"text-sm mr-1"}," 图片尺寸 ",-1),Bs={"data-tool-target":"tooltip-default"},Gs={class:"flex mt-2 py-1 pb-2 space-x-1 overflow-x-auto justify-between scrollbar-none"},Ss=["onClick"],Ks={class:"flex items-center justify-center w-6 h-6"},Hs={class:"mt-2 text-center text-xs leading-none text-current"},Ms={key:0},Ns=e("div",{class:"my-1"},null,-1),Qs={key:1},Fs={class:"mt-4 text-sm flex items-center"},Ts=e("div",{class:"mr-1"}," 模型选择 ",-1),Ls={"data-tool-target":"tooltip-default"},Es=e("div",{style:{width:"240px"}},[e("p",null,"MJ: 偏真实通用模型"),e("p",null,"NIJI: 偏动漫风格、适用于二次元模型")],-1),Vs={class:"mt-2 flex justify-between"},Js=["onClick"],Zs={class:"relative w-full h-full dark:bg-black rounded",type:"button"},Ys={class:"absolute w-full h-full flex justify-center items-center"},Xs={class:"text-2xl text-white font-bold absolute left-5 top-1"},Ws=["src"],$s={class:"mt-4"},en={class:"mt-2 flex justify-between items-center space-x-2 text-xs"},tn=e("span",{class:"w-[65px] block text-sm"},"版本",-1),sn={class:"flex-1"},nn={key:0,class:"mt-2 flex justify-between items-center space-x-2 text-xs"},an=e("span",{class:"w-[65px] block text-sm"},"风格",-1),ln={class:"flex-1"},on={class:"block text-sm mt-2 flex items-center"},rn=e("div",{style:{width:"240px"}},[e("p",null,"合理使用参数绘制更为理想的结果！")],-1),cn={class:"mt-3 flex justify-between items-center space-x-2 text-xs"},dn=e("span",{class:"w-[65px] block text-sm"},"品质",-1),un={class:"flex-1"},fn={class:"mt-3 flex justify-between items-center space-x-2 text-xs"},bn=e("span",{class:"w-[65px] block text-sm"},"混乱",-1),vn={class:"flex-1"},mn=e("div",{style:{width:"270px"}},[e("p",null,"取值范围：0-100、 --chaos 或 --c"),e("p",null,"混乱级别，可以理解为让AI天马行空的空间"),e("p",null,"值越小越可靠、默认0最为精准")],-1),gn={key:1,class:"mt-3 flex justify-between items-center space-x-2 text-xs"},xn=e("span",{class:"w-[65px] block text-sm"},"风格化",-1),hn={class:"flex-1"},pn=e("div",{style:{width:"270px"}},[e("p",null,"风格化：--stylize 或 --s，范围 1-1000"),e("p",null,"参数释义：数值越高，画面表现也会更具丰富性和艺术性")],-1),wn={class:"mt-3 flex justify-between items-center space-x-2 text-xs"},yn=e("span",{class:"w-[65px] block text-sm"},"随机种子",-1),In={class:"flex-1"},An=e("div",{style:{width:"270px"}},[e("p",null,"随机种子：--seed，可选任何正整数（例如，2、534、345554）"),e("p",null,"参数释义：这可以帮助在多次图像生成之间保持类似"),e("p",null,"不理解此参数作用可不设置")],-1),kn={key:2,class:"mt-3 flex justify-between items-center space-x-2 text-xs"},Cn=e("span",{class:"w-[65px] block text-sm"},"图生图权重",-1),On={class:"flex-1"},_n=e("div",{style:{width:"270px"}},[e("p",null,"--iw （image weight 图像权重），可用数值范围是 0-2"),e("p",null,"参数释义：参数可以调节垫图与文本提示之间的权重比例"),e("p",null,"数值越高，效果图越贴近垫图")],-1),jn=e("div",{class:"block text-sm mt-2 flex items-center"}," 设定 ",-1),Pn={class:"mt-3 flex justify-between items-center space-x-2 text-xs"},zn=e("span",{class:"w-[65px] block text-sm"},"携带参数",-1),Rn={class:"flex-1"},Un=e("div",{style:{width:"240px"}},[e("p",null,"是否自动携带参数"),e("p",null,"打开：携带上述我们配置的参数"),e("p",null,"关闭：使用指令中的我们自定义的参数")],-1),Dn={class:"mt-5"},qn=e("div",{class:"block text-base"}," 以图生图 ",-1),Bn={class:"ant-spin-nested-loading css-4fssqp mt-5"},Gn={class:"ant-spin-container"},Sn={class:"mt-2 flex justify-center items-center dark:bg-black p-5 rounded-md"},Kn={key:0,for:"upload-file"},Hn=e("div",{class:"upload-container"},[e("img",{class:"mx-auto py-2 w-11",src:"data:image/png;base64,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"}),e("p",{class:"mt-3"},"点击或拖拽一个图片到这里作为输入"),e("p",{class:"text-center dark:text-[#ffffff73]"},"支持PNG和JPG格式")],-1),Mn={key:1,class:"w-full h-full relative"},Nn=["src"],Qn={class:"mt-5"},Fn={class:"block flex justify-between"},Tn={class:"text-base py-1"},Ln={class:"text-[#3076fd]"},En={class:"flex items-center"},Vn=vt('<div class="mt-3 space-y-1 items-center text-[#3076fd]"><div class="flex justify-between"><span class="w-[120px] block text-sm">绘画单次消耗：</span><span class="text-sm pr-2"> 4积分 </span></div><div class="flex justify-between"><span class="w-[120px] block text-sm">图生图单次消耗：</span><span class="text-sm pr-2"> 4积分 </span></div><div class="flex justify-between"><span class="w-[120px] block text-sm">放大单次消耗：</span><span class="text-sm pr-2"> 1积分 </span></div></div>',1),Jn={class:"m-auto max-w-screen-4xl"},Zn={class:"space-y-6 p-4"},Yn=e("h3",{class:"text-lg sm:text-2xl font-bold leading-6"}," Midjourney ",-1),Xn={class:"flex justify-between items-end"},Wn=e("b",null,[b("你想生成什么图像? "),e("a",{href:"https://ai.sparkaigf.com/mjPrompt.html",style:{color:"#007BFF"}},"点击前往提示词参考")],-1),$n={class:"mt-4"},ea={key:0,class:"mt-4"},ta={class:"mb-3 flex justify-between items-end"},sa=e("b",null,"不需要的元素",-1),na={class:"flex items-center space-x-3 whitespace-nowrap pb-[15px]"},aa={class:"mt-3"},la={class:"space-y-2 p-4"},oa={key:0},ia={class:"mt-6 mb-4 flex flex-col"},ra={class:"text-xl font-bold flex items-end"},ca=e("b",null,"工作中的内容",-1),da={key:0,class:"text-xs font-family ml-2"},ua={key:0,class:"h-[10vh] flex flex-col justify-center items-center text-gray-500 relative"},fa=["src"],ba={class:"mt-4"},va={key:1,class:"h-[10vh] flex flex-col justify-center items-center text-gray-500 relative"},ma={class:"w-56 h-14 relative"},ga={class:"mb-3"},xa={class:"min-h-[500px] mt-5"},ha={class:"mt-6 mb-10 flex flex-col"},pa={class:"text-xl font-bold"},wa={class:"text-base text-[gray]"},ya=e("span",{class:"mt-2 text-xs font-bold text-[#444]"},"点击下面的编号按钮以获取升级版（U: 放大图片更细节）或变化版（V: 在此基础上变体）",-1),Ia={key:0,class:"w-full py-28"},Aa=e("img",{class:"mx-auto",src:"data:image/png;base64,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",alt:""},null,-1),ka=[Aa],Ca={key:1},Oa={class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 4xl:grid-cols-5 gap-4"},Ua=ze({__name:"index",setup(r){const P=m(null),T=rt(),ae=ct(),y=Ue(),le=I(()=>y.isLogin),oe=I(()=>y.userBalance),$=I(()=>oe.value.sumDrawMjCount||0),z=Re(),ie=I(()=>z.theme),L=I(()=>ie.value==="dark"?"#fff":"#000"),R=qe(),re=De(),{isMobile:E}=dt(),ce=m("/api/upload/file");let V=!1,q=null;const S=m("9:16"),C=m("MJ"),k=m("6.0"),K=m(0),H=m("1"),M=m(100),u=m(0),i=m(0),f=m(1),w=m(""),_=m(""),O=m([]),B=m(0),N=m(!1),D=m(!1),j=m(!1),de=m([]),J=m(12),ue=m(!0),fe=m(0),G=m(1),Se=I(()=>!w.value||D.value||j.value||Z.value),U=m("");let Q;ut(le,async(a,o)=>{a&&!o&&await Y()});const Ke=I(()=>fe.value>J.value),He=[{aspect:"1:1 头像图",width:"100%",height:"100%"},{aspect:"4:3 文章图",width:"100%",height:"75%"},{aspect:"3:4 媒体图",width:"75%",height:"100%"},{aspect:"16:9 壁纸图",width:"100%",height:"57%"},{aspect:"9:16 海报图",width:"57%",height:"100%"}],Me=[{label:"默认风格",value:0},{label:"表现力风格",value:"expressive"},{label:"可爱风格",value:"cute"},{label:"景观风格",value:"scenic"}],Ne=[{label:"普通",value:".25"},{label:"一般",value:".5"},{label:"高清",value:"1"},{label:"超高清",value:"2"}],Qe=I(()=>C.value==="MJ"?[{label:"V6 Beta",value:"6.0"},{label:"V 5.2",value:"5.2"},{label:"V 5.1",value:"5.1"},{label:"V 5",value:"5"},{label:"V 4",value:"4"}]:C.value==="NIJI"?[{label:"5",value:"5"},{label:"4",value:"4"}]:[]),Fe=[{name:"MJ",img:It,val:"mj"},{name:"NIJI",img:yt,val:"niji"}],he=I(()=>a=>S.value===a),Te=I(()=>a=>C.value===a);function Le(a){var l;const o=(l=a==null?void 0:a.target)==null?void 0:l.files[0];pe(o)}function Ee(a){a.preventDefault();const o=a.dataTransfer.files[0];pe(o)}async function pe(a){Q=a;const o=new FileReader;o.onload=l=>{var h;U.value=(h=l.target)==null?void 0:h.result},o.readAsDataURL(a)}async function Ve(){const a=await mt();de.value=a.data.filter(o=>o.status)}async function Je(){const a=await ke({page:1,size:J.value}),{rows:o,countQueue:l,count:h}=a.data;O.value=o||[],fe.value=h,B.value=l||0}async function Ze(){const a=ae.query.mjId;if(!a)return;const o=await gt({id:a});o.success&&(w.value=o.data,G.value=0,ue.value=!0)}async function we(){if(!w.value)return R.warning("请输入描述词！");j.value=!0;try{const a=Number(y.globalConfig.mjUseBaiduFy)===1?_e:Ce,o=Number(y.globalConfig.mjUseBaiduFy)===1?{text:w.value}:{prompt:w.value},l=await a(o);if(!l.success)return R.error("翻译失败了！");w.value=l.data,j.value=!1}catch{j.value=!1}}const Z=m(!1);async function ye(){if(!_.value)return R.warning("请输入描述词！");Z.value=!0;try{const a=Number(y.globalConfig.mjUseBaiduFy)===1?_e:Ce,o=Number(y.globalConfig.mjUseBaiduFy)===1?{text:_.value}:{prompt:_.value},l=await a(o);if(!l.success)return R.error("翻译失败了！");_.value=l.data,Z.value=!1}catch{Z.value=!1}}async function Ye(){if(!w.value)return R.warning("请输入描述词！");D.value=!0;try{const a=await pt({prompt:w.value});if(!a.success)return R.error("联想失败了");w.value=a.data,D.value=!1}catch{D.value=!1}}function Ie(a){return/[\u4E00-\u9FA5]/g.test(a)}function Xe(a){const o=/--\w+\s\S+/g;return a.replace(o,"")}function We(){if(!G.value)return"";let a="";return _.value&&(a+=` --no ${_.value}`),C.value==="MJ"&&k.value&&(a+=` --v ${k.value}`,a+=` --s ${M.value}`),C.value==="NIJI"&&k.value&&(a+=` --niji ${k.value}`,K.value&&(a+=` --style ${K.value}`)),a+=` --ar ${S.value}`,a+=` --c ${u.value}`,a+=` --q ${H.value}`,i.value&&(a+=` --seed ${i.value}`),U.value&&(a+=` --iw ${f.value}`),a}async function $e(){var l;const a=new FormData;Q&&a.append("file",Q);const o=await Ge.post(ce.value,a,{headers:{"Content-Type":"multipart/form-data"}});return(l=o==null?void 0:o.data)==null?void 0:l.data}function et(a){const{prompt:o,aspect:l,isCarryParams:h}=a;w.value=o,l&&(S.value=l),G.value=h?1:0}function tt(){const a=Ie(w.value),o=Ie(_.value);if(a||o){const l=re.warning({title:"温馨提示",content:"您的提示词中包含中文、绘画AI可能无法识别您的中文、我们建议您翻译后进行绘画得到更准确的结果、请问需要翻译后提交么？",positiveText:"翻译提示词",negativeText:"不需要",onPositiveClick:async()=>{l.loading=!0;const h=[];a&&h.push(we()),o&&h.push(ye()),await Promise.all(h),be()},onNegativeClick:()=>{be()}})}else be()}async function be(){let a="";(U.value||Q)&&(a=await $e());const o=We();G.value&&(w.value=Xe(w.value)),await F({prompt:w.value,imgUrl:a,extraParam:o}),Q&&(Q=null),U.value="",ue.value&&(G.value=1,ue.value=!1),R.success("提交绘制任务成功、请等待绘制结束！"),y.token&&await Ae(),!V&&Y()}async function Y(){V=!0;const a=await ke({page:1,size:J.value}),{rows:o,countQueue:l,count:h}=a.data;O.value=o||[],fe.value=h,B.value=l||0,O.value.filter(at=>[1,2].includes(at.status)).length?q=setTimeout(()=>Y(),3e3):V=!1}ft(()=>{clearTimeout(q)});const ve=I(()=>O.value.filter(a=>[1,2].includes(a.status)));function st(){T.push("/market")}function nt(a){C.value=a,a==="MJ"&&(k.value="5.1"),a==="NIJI"&&(k.value="5")}async function Ae(){N.value=!0;try{await y.getUserInfo(),N.value=!1}catch{N.value=!1}}return bt(()=>{Y(),Ze(),Ve();const a=document.getElementById("footer");new IntersectionObserver((l,h)=>{l.forEach(X=>{X.isIntersecting&&Ke.value&&(J.value=J.value+12,Je())})}).observe(a)}),(a,o)=>(c(),d("div",zs,[e("div",Rs,[e("div",Us,[e("div",Ds,[qs,e("div",Bs,[s(t(p),{placement:"right-end",trigger:"hover"},{trigger:n(()=>[s(t(x),{icon:"ri:error-warning-line",class:"text-base"})]),default:n(()=>[b(" 参数释义：生成图片尺寸比例 ")]),_:1})])]),e("div",Gs,[(c(),d(ee,null,te(He,(l,h)=>e("button",{key:h,class:"flex-1 p-[2px] rounded-md",onClick:X=>S.value=l.aspect},[e("div",{class:W(["border-2 border-gray-300 box-border rounded-md dark:bg-black flex flex-col items-center",[t(he)(l.aspect)?"aspect-active":"",t(E)?"py-3":"py-2"]])},[e("div",Ks,[e("div",{class:W(["border-gray-300 rounded border-2",[t(he)(l.aspect)?"aspect-active":""]]),style:xt({width:l.width,height:l.height})},null,6)]),e("div",Hs,[l.aspect.includes(" ")?(c(),d("div",Ms,[e("div",null,A(l.aspect.split(" ")[0]),1),Ns,e("div",null,A(l.aspect.split(" ")[1]),1)])):(c(),d("div",Qs,A(l.aspect),1))])],2)],8,Ss)),64))]),e("div",Fs,[Ts,e("div",Ls,[s(t(p),{placement:"right-end",trigger:"hover"},{trigger:n(()=>[s(t(x),{icon:"ri:error-warning-line",class:"text-base"})]),default:n(()=>[Es]),_:1})])]),e("ul",Vs,[(c(),d(ee,null,te(Fe,(l,h)=>e("li",{key:h,class:W(["flex border-[3px] border-transparent justify-center items-center rounded-md m-1 m-bg-gradient",[t(Te)(l.name)?"model-active":""]]),onClick:X=>nt(l.name)},[e("button",Zs,[e("div",Ys,[e("div",Xs,A(l.name),1)]),e("img",{src:l.img,class:"rounded aspect-[3/1] w-full object-cover"},null,8,Ws)])],10,Js)),64))]),e("div",$s,[e("div",en,[tn,e("span",sn,[s(t(ge),{value:k.value,"onUpdate:value":o[0]||(o[0]=l=>k.value=l),size:"small",options:t(Qe)},null,8,["value","options"])])]),C.value==="NIJI"?(c(),d("div",nn,[an,e("span",ln,[s(t(ge),{value:K.value,"onUpdate:value":o[1]||(o[1]=l=>K.value=l),size:"small",options:Me},null,8,["value"])])])):v("",!0),e("div",on,[b(" 参数 "),s(t(p),{placement:"right-end",trigger:"hover"},{trigger:n(()=>[s(t(x),{icon:"ri:error-warning-line",class:"text-base ml-2"})]),default:n(()=>[rn]),_:1})]),e("div",cn,[dn,e("span",un,[s(t(ge),{value:H.value,"onUpdate:value":o[2]||(o[2]=l=>H.value=l),size:"small",options:Ne},null,8,["value"])])]),e("div",fn,[bn,e("span",vn,[s(t(se),{value:u.value,"onUpdate:value":o[3]||(o[3]=l=>u.value=l),min:0,max:100,size:"small"},null,8,["value"])]),s(t(p),{placement:"right-end",trigger:"hover"},{trigger:n(()=>[s(t(x),{icon:"ri:error-warning-line",class:"text-base ml-2"})]),default:n(()=>[mn]),_:1})]),C.value==="MJ"?(c(),d("div",gn,[xn,e("span",hn,[s(t(se),{value:M.value,"onUpdate:value":o[4]||(o[4]=l=>M.value=l),min:0,max:1e3,size:"small"},null,8,["value"])]),s(t(p),{placement:"right-end",trigger:"hover"},{trigger:n(()=>[s(t(x),{icon:"ri:error-warning-line",class:"text-base ml-2"})]),default:n(()=>[pn]),_:1})])):v("",!0),e("div",wn,[yn,e("span",In,[s(t(se),{value:i.value,"onUpdate:value":o[5]||(o[5]=l=>i.value=l),size:"small"},null,8,["value"])]),s(t(p),{placement:"right-end",trigger:"hover"},{trigger:n(()=>[s(t(x),{icon:"ri:error-warning-line",class:"text-base ml-2"})]),default:n(()=>[An]),_:1})]),U.value?(c(),d("div",kn,[Cn,e("span",On,[s(t(se),{value:f.value,"onUpdate:value":o[6]||(o[6]=l=>f.value=l),min:0,max:2,size:"small"},null,8,["value"])]),s(t(p),{placement:"right-end",trigger:"hover"},{trigger:n(()=>[s(t(x),{icon:"ri:error-warning-line",class:"text-base ml-2"})]),default:n(()=>[_n]),_:1})])):v("",!0),jn,e("div",Pn,[zn,e("span",Rn,[s(t(wt),{value:G.value,"onUpdate:value":o[7]||(o[7]=l=>G.value=l),size:"small","checked-value":1,"unchecked-value":0},null,8,["value"])]),s(t(p),{placement:"right-end",trigger:"hover"},{trigger:n(()=>[s(t(x),{icon:"ri:error-warning-line",class:"text-base ml-2"})]),default:n(()=>[Un]),_:1})])]),e("div",Dn,[qn,e("div",Bn,[e("div",Gn,[e("div",Sn,[U.value?v("",!0):(c(),d("label",Kn,[e("div",{class:"upload cursor-pointer",onDragover:o[9]||(o[9]=me(()=>{},["prevent"])),onDragenter:o[10]||(o[10]=me(()=>{},["prevent"])),onDragleave:o[11]||(o[11]=me(()=>{},["prevent"])),onDrop:Ee},[e("input",{id:"upload-file",type:"file",accept:".png, .jpg, .jpeg",style:{display:"none"},onChange:o[8]||(o[8]=l=>Le(l))},null,32),Hn],32)])),U.value?(c(),d("div",Mn,[e("img",{src:U.value,alt:""},null,8,Nn),e("img",{class:"absolute bottom-1 right-1 cursor-pointer",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAD0klEQVRIiY2WS2xWRRTHf/+ZryimPqLhocEAMbrQqBvYK4G2ArJxw0YxqLSo3bgQceFKo4mJywoYUBFZAilNRKVEN8ZoF2xYoiUhaSISExsVtJxj5n5z+917ez/xTk7uPM+Z8/qf0cnxWQxhru6/ToOOHja02dAGQ+sN3WNIjn4zdNHQjKNpQxcMzTsUPDzzKceaHP+5x7wnbJmhJw2NGtqWxzUGVXL0t6EvDQ5kodebgjqh6OZPgLMK2A+MAreSp0sy6l+eWwY8DYw4HALecZgjC0kyOrGrWG7hfokJwXZ5f+ZV4d01L0ZCAwavAA847AVmy9WQpGVaFbCJgG0PGEFG8a9QrFB9zYk9PolGAn4g4PeV6yF2N90S8X0R357HXVKlX2dUoz5rwwF/M+DLi3GWuCngr7ZstiC/0WTapECxx6p7un3bG/EtpUa3RWw0YgOxbh6P2LGIvR7lc6V2LZe5EvD9Af844jfqZvXkmpcDfnvqPBLwoRYGCwH/IeAfBGwsYL9U/ZYv82ssbm3vR+y7gFmLSZO1Hu9EfEiwXI0wFgwI3hBcEkwK/hIclVidItLgCrAbmAKGgLeAgaURWcwNJR9taEZXhdYE/EjW+OuAvxDw+Sj/M8r3RHwq4psi/mnE1/YLmohvTBqtb9GmQrZC6DOhF4VOCz1nqAM6hTSC6wiE1S2plnl4ytR1CRnubtvUSMyVguOCXYITeW5HNuWd8mrS95otXpfBJEil5AQWTY0qqBCBDm1j5fTvf1klCEoovKbHti4qt6tCe4ROCG1NUCN0UoSdgsOFxsonfKn5DeaTRj8BjzbBs7LpKvB8jq4twOdZk51gU6BnQcdAK7p3F/gSTrMpj2b+A2LmAovR9UTEP4n4XREfjPjhiA9H/KuI74745X7QFfGZhAwpbK/Xw7FIxoWIvRexEwF7KmDHA9YDyQKE/WjAdwR8KuNaj48W+f2TUiOZ7gJwFnxb6ZFutBCAx+jC/j7g3krIl75bKXRQaK3Qg0KdSskh++0bOed1cfz7dGyro0lDsVE5zbrUaSnzVVpI5b15Pp99xtCpsh6dC/hEE6EzKHZuht4RT4kfW+Y/Sq5J/YKJ4JrBu8BDguF6RfU+SdiPQnnwHPA28AeNCpsibCzgZ3ItySjdv9i1UxFI0xF7KWKXy7ITGgxmA747YB+mMtEU8j+qbSoThwK+K+Vnda0wXTJVqXB+vbwm+MJgLJeAzk0eKQuCacFBwZlcUmrGXXxulVDl3RfNNYfTwLcpxAWbDTYC68DvyP6aF7pk6EfQWdB50O+tvkP8C8uzPO7HeTXiAAAAAElFTkSuQmCC",onClick:o[12]||(o[12]=l=>U.value=null)})])):v("",!0)])])])]),e("div",Qn,[e("div",Fn,[e("span",Tn,[b("钱包余额("),e("b",Ln,A(t($)||0),1),b(" 积分)")]),e("span",En,[s(t(g),{text:"",size:"tiny",type:"primary",loading:N.value,onClick:Ae},{default:n(()=>[b("刷新")]),_:1},8,["loading"]),s(t(p),{placement:"right-end",trigger:"hover"},{trigger:n(()=>[s(t(x),{icon:"ri:error-warning-line",class:"text-base ml-2"})]),default:n(()=>[b(" 绘画账户信息 ")]),_:1})])]),Vn])]),e("div",{class:W(["h-full flex-1",[t(E)?"":"overflow-y-auto overflow-hidden"]])},[e("div",Jn,[e("div",Zn,[Yn,e("div",null,[e("div",Xn,[Wn,s(t(ne),null,{default:n(()=>[s(t(g),{type:"primary",loading:j.value,onClick:we},{icon:n(()=>[s(t(x),{icon:"ri:translate",class:"text-base"})]),default:n(()=>[b(" 翻译 ")]),_:1},8,["loading"]),s(t(g),{type:"primary",loading:D.value,onClick:Ye},{icon:n(()=>[s(t(x),{icon:"material-symbols:mindfulness-outline-rounded",class:"text-base"})]),default:n(()=>[b(" 提示词联想 ")]),_:1},8,["loading"])]),_:1})]),e("div",$n,[s(t(Oe),{value:w.value,"onUpdate:value":o[13]||(o[13]=l=>w.value=l),type:"textarea",disabled:D.value||j.value,autosize:{minRows:4,maxRows:6},placeholder:"例如: A cute little cat (Midjourney对中文描述词有一定限制、我们建议您点击右侧翻译将您的描述词转为英文再进行提交、联想则是会将您的描述词交由GPT让其发挥想象空间为您在此基础创建更为详细的描述！)"},null,8,["value","disabled"]),Number(t(y).globalConfig.mjHideNotBlock)!==1?(c(),d("div",ea,[e("div",ta,[sa,s(t(g),{type:"primary",loading:Z.value,onClick:ye},{icon:n(()=>[s(t(x),{icon:"ri:translate",class:"text-base"})]),default:n(()=>[b(" 翻译 ")]),_:1},8,["loading"])]),s(t(Oe),{value:_.value,"onUpdate:value":o[14]||(o[14]=l=>_.value=l),type:"textarea",rows:1,placeholder:"例：生成房间图片、但是不要床、你可以填bed！"},null,8,["value"])])):v("",!0)]),de.value.length?(c(),d("div",{key:0,class:W(["w-full dark:bg-transparent",t(E)?"py-3":"py-6"])},[s(t(ht),{"x-scrollable":""},{default:n(()=>[e("div",na,[(c(!0),d(ee,null,te(de.value,(l,h)=>(c(),xe(t(g),{size:"small",key:h,onClick:X=>et(l)},{default:n(()=>[b(A(l.title),1)]),_:2},1032,["onClick"]))),128))])]),_:1})],2)):v("",!0),e("div",aa,[s(t(g),{type:"primary",loading:!1,disabled:t(Se),onClick:tt},{icon:n(()=>[s(t(x),{icon:"ri:ai-generate",class:"text-base"})]),default:n(()=>[b(" 提交绘画任务 ")]),_:1},8,["disabled"])])])]),e("div",la,[Number(t(y).globalConfig.mjHideWorkIn)!==1?(c(),d("div",oa,[e("div",ia,[e("span",ra,[ca,B.value?(c(),d("span",da,"当前系统进行中任务["+A(B.value)+"]",1)):v("",!0)])]),t(ve).length?v("",!0):(c(),d("div",ua,[e("img",{class:"w-18",src:t(At)},null,8,fa),e("span",ba,[s(t(g),{text:"",size:"small",onClick:st},{default:n(()=>[b("点击前往市场看看别人的作品吧！")]),_:1})])])),t(ve).length?(c(),d("div",va,[e("div",ma,[s(Be,{"text-color":t(L)},null,8,["text-color"])]),e("p",ga," 当前"+A(t(ve).length)+"个任务正在进行中、请耐心等候绘制完成、您可以前往其他页面稍后回来查看结果！ ",1)])):v("",!0)])):v("",!0),e("div",xa,[e("div",ha,[e("span",pa,[b("我的绘图 "),e("span",wa,"["+A(O.value.length)+"]",1)]),ya]),!O.value||!O.value.length?(c(),d("div",Ia,ka)):v("",!0),O.value&&O.value.length?(c(),d("div",Ca,[e("div",Oa,[(c(!0),d(ee,null,te(O.value,l=>(c(),xe(Ps,{key:l.id,onQueryData:Y,drawItemInfo:l},null,8,["drawItemInfo"]))),128))])])):v("",!0)]),e("div",{id:"footer",ref_key:"containerRef",ref:P},null,512)])])],2)])]))}});export{Ua as default};
